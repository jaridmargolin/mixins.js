!function(a,b){"function"==typeof define&&define.amd?define(["underscore"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("underscore")):a.mixins=b(a.underscore)}(this,function(a){var b,c;return c=function(){var b=a,c=function(a,c,d){this.obj=a.prototype||a,this.mixins=c||[],this.globals=d||{},this.collisions={},b.each(this.mixins,this.mixin,this),b.each(this.collisions,this.createComposite,this)};return c.prototype.mixin=function(a){b.isString(a)&&(a=this.globals[a]),b.each(a,this.merge,this)},c.prototype.merge=function(a,c){b.isFunction(a)?this.mergeFunction(a,c):b.isArray(a)?this.mergeArray(a,c):b.isObject(a)?this.mergeObject(a,c):c in this.obj||(this.obj[c]=a)},c.prototype.mergeFunction=function(a,c){var d=this.obj[c]===a,e=b.contains(this.collisions[c],a);d||e||(this.obj[c]&&(this.collisions[c]=this.collisions.hasOwnProperty(c)?this.collisions[c]:[this.obj[c]],this.collisions[c].push(a)),this.obj[c]=a)},c.prototype.mergeArray=function(a,c){this.obj[c]=b.union(this.obj[c]||[],a)},c.prototype.mergeObject=function(a,c){this.obj[c]=b.extend({},a,this.obj[c]||{})},c.prototype.createComposite=function(a,c){this.obj[c]=function(){var c=arguments;return b.reduce(a,function(a,d){var e=b.isFunction(d)?d.apply(this,c):d;return"undefined"==typeof e?a:e},null,this)}},c}({}),b=function(){var b=a,d=c;return{globals:{},Mixin:d,mixin:function(a){{var c=b.chain(arguments).toArray().rest().flatten().value();new this.Mixin(a,c,this.globals)}return a}}}({})});