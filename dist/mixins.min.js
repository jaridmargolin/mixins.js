!function(a,b){"function"==typeof define&&define.amd?define(["underscore"],function(c){return a.returnExportsGlobal=b(c)}):"object"==typeof exports?module.exports=b(require("underscore")):a.mixins=b(a.underscore)}(this,function(a){var b,c;return c=function(b){var c=a,d=function(a,b,d){this.obj=a.prototype||a,this.mixins=b||[],this.globals=d||{},this.collisions={},c.each(this.mixins,this.mixin,this),c.each(this.collisions,this.createComposite,this)};return d.prototype.mixin=function(a){c.isString(a)&&(a=this.globals[a]),c.each(a,this.merge,this)},d.prototype.merge=function(a,b){b in this.obj?c.isFunction(a)?this.mergeFunction(a,b):c.isArray(a)?this.mergeArray(a,b):c.isObject(a)&&this.mergeObject(a,b):this.obj[b]=a},d.prototype.mergeFunction=function(a,b){var d=this.obj[b]===a,e=c.contains(this.collisions[b],a);d||e||(this.obj[b]&&(this.collisions[b]=this.collisions.hasOwnProperty(b)?this.collisions[b]:[this.obj[b]],this.collisions[b].push(a)),this.obj[b]=a)},d.prototype.mergeArray=function(a,b){this.obj[b]=c.union(this.obj[b]||[],a)},d.prototype.mergeObject=function(a,b){this.obj[b]=c.extend({},a,this.obj[b]||{})},d.prototype.createComposite=function(a,b){this.obj[b]=function(){var b=arguments;return c.reduce(a,function(a,d){var e=c.isFunction(d)?d.apply(this,b):d;return"undefined"==typeof e?a:e},null,this)}},d}({}),b=function(b){var d=a,e=c;return{globals:{},Mixin:e,mixin:function(a){var b=d.chain(arguments).toArray().rest().flatten().value();new this.Mixin(a,b,this.globals);return a}}}({})});